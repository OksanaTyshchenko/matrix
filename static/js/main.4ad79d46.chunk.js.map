{"version":3,"sources":["store/index.ts","Form/Form.tsx","Matrix/Matrix.tsx","App.tsx","index.tsx"],"names":["UPDATE_XARR","ADD_XARR","DELETE_ROW","ADD_ROW","ADD_COUNT_CLOSEST","actions","xArr","type","rowIndex","colIndex","row","count","selectors","state","countClosest","initialState","store","createStore","action","obj","amount","filter","arr","index","composeWithDevTools","Form","useState","rows","setRows","columns","setColumns","closest","setClosest","dispatch","useDispatch","onSubmit","event","preventDefault","createdXArr","Array","from","length","id","uuidv4","Math","ceil","random","className","htmlFor","min","max","value","onChange","target","Matrix","useSelector","selectedCell","setSelectedCell","selectedRow","setSelectedRow","avg","_","round","reduce","acc","el","calculateSum","sum","num","calculatePart","toFixed","handleHoverCell","cell","handleHoverSum","joinArr","flat","sortedArr","sort","a","b","abs","slice","isCellClosest","find","onMouseLeave","map","onClick","onMouseOver","onFocus","classNames","Matrix__relatedButton","Matrix__selectedButton","Matrix__buttonPercent","style","height","newRow","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4ad79d46.chunk.js","sourcesContent":["import { legacy_createStore as createStore, AnyAction } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport { X } from '../types';\n\nconst UPDATE_XARR = 'UPDATE_XARR';\nconst ADD_XARR = 'ADD_XARR';\nconst DELETE_ROW = 'DELETE_ROW';\nconst ADD_ROW = 'ADD_ROW';\nconst ADD_COUNT_CLOSEST = 'ADD_COUNT_CLOSEST';\n\nexport const actions = {\n  addXArr: (xArr: X[][]) => ({\n    type: ADD_XARR,\n    xArr,\n  }),\n  updateXArr: (rowIndex: number, colIndex: number) => ({\n    type: UPDATE_XARR,\n    rowIndex,\n    colIndex,\n  }),\n  deleteRow: (rowIndex: number) => ({\n    type: DELETE_ROW,\n    rowIndex,\n  }),\n  addRow: (row: X[]) => ({\n    type: ADD_ROW,\n    row,\n  }),\n  addClosest: (count: number) => ({\n    type: ADD_COUNT_CLOSEST,\n    count,\n  }),\n};\n\nexport const selectors = {\n  getXArr: (state: RootState) => state.xArr,\n  getCountClosest: (state: RootState) => state.countClosest,\n};\n\ntype RootState = {\n  xArr: X[][];\n  countClosest: number;\n};\n\nconst initialState: RootState = {\n  xArr: [],\n  countClosest: 0,\n};\n\nconst rootReducer = (state = initialState, action: AnyAction) => {\n  switch (action.type) {\n    case ADD_XARR: {\n      return {\n        ...state,\n        xArr: action.xArr,\n      };\n    }\n\n    case UPDATE_XARR: {\n      const obj = { ...state.xArr[action.rowIndex][action.colIndex] };\n\n      obj.amount += 1;\n      const xArr = [...state.xArr];\n\n      xArr[action.rowIndex][action.colIndex] = obj;\n\n      return {\n        ...state,\n        xArr,\n      };\n    }\n\n    case DELETE_ROW: {\n      return {\n        ...state,\n        xArr: state.xArr.filter((arr, index) => index !== action.rowIndex),\n      };\n    }\n\n    case ADD_ROW: {\n      return {\n        ...state,\n        xArr: [...state.xArr, action.row],\n      };\n    }\n\n    case ADD_COUNT_CLOSEST: {\n      return {\n        ...state,\n        countClosest: action.count,\n      };\n    }\n\n    default:\n      return state;\n  }\n};\n\nconst store = createStore(rootReducer, composeWithDevTools());\n\nexport default store;\n","import React, { SyntheticEvent, useState } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { v4 as uuidv4 } from 'uuid';\nimport './Form.scss';\nimport { actions } from '../store';\n\nexport const Form = () => {\n  const [rows, setRows] = useState<number>(0);\n  const [columns, setColumns] = useState<number>(0);\n  const [closest, setClosest] = useState<number>(0);\n  const dispatch = useDispatch();\n\n  const handleSubmit = (event: SyntheticEvent) => {\n    event.preventDefault();\n\n    const createdXArr = Array.from({ length: rows },\n      () => Array.from({ length: columns }, () => ({\n        id: uuidv4(),\n        amount: Math.ceil(Math.random() * 1000),\n      })));\n\n    dispatch(actions.addXArr(createdXArr));\n    dispatch(actions.addClosest(closest));\n    setRows(0);\n    setColumns(0);\n    setClosest(0);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"box Form\">\n      <label htmlFor=\"rows\" className=\"label\">\n        Count of rows:\n        <input\n          type=\"number\"\n          min={0}\n          max={100}\n          id=\"rows\"\n          value={rows}\n          onChange={(event) => setRows(+event.target.value)}\n          className=\"Form__input\"\n        />\n      </label>\n\n      <label htmlFor=\"columns\" className=\"label\">\n        Count of columns:\n        <input\n          type=\"number\"\n          min={0}\n          max={100}\n          id=\"columns\"\n          value={columns}\n          onChange={(event) => setColumns(+event.target.value)}\n          className=\"Form__input\"\n        />\n      </label>\n\n      <label htmlFor=\"close\" className=\"label\">\n        Count of close numbers:\n        <input\n          type=\"number\"\n          min={0}\n          max={100}\n          id=\"close\"\n          value={closest}\n          onChange={(event) => setClosest(+event.target.value)}\n          className=\"Form__input\"\n        />\n      </label>\n\n      <button type=\"submit\" className=\"button is-info Form__button\">\n        Create matrix\n      </button>\n    </form>\n  );\n};\n","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport classNames from 'classnames';\nimport { v4 as uuidv4 } from 'uuid';\nimport './Matrix.scss';\nimport { actions, selectors } from '../store';\nimport { X } from '../types';\n\nexport const Matrix = () => {\n  const xArr = useSelector(selectors.getXArr);\n  const [selectedCell, setSelectedCell] = useState<null | X>(null);\n  const [selectedRow, setSelectedRow] = useState<null | number>(null);\n  const countClosest = useSelector(selectors.getCountClosest);\n  const dispatch = useDispatch();\n\n  const avg = Array.from({ length: xArr[0]?.length }, (_: undefined, index: number) => {\n    return Math.round(xArr.reduce((acc, el) => {\n      return acc + el[index].amount;\n    }, 0) / xArr.length);\n  });\n\n  const calculateSum = (arr: X[]) => {\n    return arr.reduce((sum, num) => sum + num.amount, 0);\n  };\n\n  const calculatePart = (amount: number, row: X[]) => {\n    return ((amount / calculateSum(row)) * 100).toFixed(1);\n  };\n\n  const handleHoverCell = (cell: X) => {\n    setSelectedCell(cell);\n  };\n\n  const handleHoverSum = (rowIndex: number) => {\n    setSelectedRow(rowIndex);\n    setSelectedCell(null);\n  };\n\n  const addRow = () => {\n    const newRow = Array.from({ length: xArr[0]?.length }, () => ({\n      id: uuidv4(),\n      amount: Math.ceil(Math.random() * 1000),\n    }));\n\n    dispatch(actions.addRow(newRow));\n  };\n\n  const target = selectedCell?.amount;\n  const joinArr = xArr.flat();\n  const sortedArr = target ? joinArr\n    .sort((a, b) => (Math.abs(a.amount - target) - Math.abs(b.amount - target))) : null;\n  const closest = sortedArr?.slice(1, countClosest + 1);\n\n  const isCellClosest = (cell: X): boolean => {\n    if (!closest) {\n      return false;\n    }\n\n    const searchEl = closest.find(({ amount }) => amount === cell.amount);\n\n    return !!searchEl;\n  };\n\n  return (\n    <div className=\"wrapper\">\n      <table\n        className=\"Matrix\"\n        onMouseLeave={() => {\n          setSelectedCell(null);\n        }}\n      >\n        <tbody>\n          {xArr.map((row, rowIndex) => (\n            <tr key={uuidv4()}>\n              <td>\n                <button\n                  type=\"button\"\n                  onClick={() => dispatch(actions.deleteRow(rowIndex))}\n                  className=\"Matrix__button Matrix__delete\"\n                >\n                  🗑\n                </button>\n              </td>\n              {row.map((cell, colIndex) => (\n                <td key={cell.id}>\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      dispatch(actions.updateXArr(rowIndex, colIndex));\n                    }}\n                    onMouseOver={() => handleHoverCell(cell)}\n                    onFocus={() => handleHoverCell(cell)}\n                    className={classNames('Matrix__button', {\n                      Matrix__relatedButton: isCellClosest(cell),\n                      Matrix__selectedButton: cell.id === selectedCell?.id,\n                      Matrix__buttonPercent: selectedRow === rowIndex,\n                    })}\n                  >\n                    {selectedRow === rowIndex ? (\n                      <>\n                        <span>{`${calculatePart(cell.amount, row)}%`}</span>\n                        <div style={{ height: `${calculatePart(cell.amount, row)}%` }} className=\"Matrix__part\">{}</div>\n                      </>\n                    ) : (<span>{cell.amount}</span>)}\n                  </button>\n                </td>\n              ))}\n              <td\n                className=\"Matrix__selected Matrix__sum\"\n                onFocus={() => handleHoverSum(rowIndex)}\n                onMouseOver={() => handleHoverSum(rowIndex)}\n                onMouseLeave={() => setSelectedRow(null)}\n              >\n                {calculateSum(row)}\n              </td>\n            </tr>\n          ))}\n          <tr>\n            {xArr.length > 0 && <td></td>}\n            {avg.map(value => (\n              <td key={uuidv4()} className=\"Matrix__selected\">{value}</td>))}\n            {xArr.length > 0 && <td className=\"Matrix__selected\">avg/sum</td>}\n          </tr>\n        </tbody>\n      </table>\n      {xArr.length > 0\n      && <button type=\"button\" className=\"button is-info Matrix__addButton\" onClick={addRow}>Add row</button>}\n    </div>\n  );\n};\n","import React from 'react';\nimport { Form } from './Form/Form';\nimport { Matrix } from './Matrix/Matrix';\nimport './App.scss';\n\nexport const App: React.FC = () => {\n  return (\n    <div className=\"App\">\n      <Form />\n      <Matrix />\n    </div>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport './index.scss';\nimport 'bulma/css/bulma.css';\nimport { App } from './App';\nimport store from './store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}